// backend-app/prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id             String    @id @default(uuid())
  email          String    @unique
  name           String
  password       String
  stravaToken    String?
  stravaId       String?   @unique
  workouts       Workout[]
  races          Race[]
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

model Workout {
  id               String   @id @default(uuid())
  userId           String
  user             User     @relation(fields: [userId], references: [id])
  
  date             DateTime
  type             String   // Vamos validar "EASY", "LONG", etc no código
  title            String
  description      String?  // Removemos @db.Text (desnecessário no SQLite)
  
  plannedDistance  Int?
  plannedDuration  Int?
  
  actualDistance   Int?
  actualDuration   Int?
  status           String   @default("PENDING")
  
  stravaActivityId String?  @unique
  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model Race {
  id                String   @id @default(uuid())
  userId            String
  user              User     @relation(fields: [userId], references: [id])
  
  name              String
  date              DateTime
  distance          Int
  priorityLevel     String
  
  goalTimeSeconds   Int?
  resultTimeSeconds Int?
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}